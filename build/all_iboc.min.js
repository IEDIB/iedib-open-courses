
    window.IB = window.IB || {}; window.IB.sd = window.IB.sd || {}; 
    !function(){if(document.getElementById("sd_css_all")){return;}; var l = ' .confetti-canvas {   position: absolute;   top:0;   left:0;   width:100%;   height:100%;  } div.no-overflow {  overflow: initial !important; } ul[role="sections"] {  position: relative;  list-style-type: none;  margin-left: 0; } ul[role="sections"][data-active="1"] > li {  position: relative; /*transform: translate(-15px, 0);*/ } ul[role="sections"][data-active="1"]::before {  content: "";  position:absolute;  top:5px;  left:-10px;  width: 3px;  height:100%;  background: lightblue; } ul[role="sections"] > li > h3::before {  /* content: " ";*/   cursor: pointer;   position: absolute;   left: -38px;   top: -3px;   width: 25px;   height:25px;   background: lightblue;   border-radius:50%;   border: 4px solid lightblue;   z-index: 101; } .pw-section-important::before {  border: 4px solid purple !important;  background: #e0a2e0 !important; } .pw-section-active {  cursor: pointer;  color: darkblue;  font-family: arial;  font-size: 20px; } .pw-section-active:hover {  color: blue; } .pw-section-plus::before {  content: "\\f078";  font-family: "Font Awesome\\ 5 Pro";   font-weight: 700;  font-size: 16px;  text-align: center;  color: darkblue; } .pw-section-minus::before {  content: "\\f077";  font-family: "Font Awesome\\ 5 Pro";   font-weight: 700;  font-size: 16px;  text-align: center;  color: darkblue; } @keyframes anim-section-semi {  0% {     max-height: 1000px;  }  100% {   max-height: 40px;  -webkit-mask-image: -webkit-gradient(linear, left top, left bottom, from(rgba(0,0,0,1)), to(rgba(0,0,0,0)));  } } @keyframes anim-section-show {  0% {   overflow: hidden;   max-height: 40px;   -webkit-mask-image: -webkit-gradient(linear, left top, left bottom, from(rgba(0,0,0,1)), to(rgba(0,0,0,0)));  }  100% {    max-height: 1000px;  } } .pw-section-semi {  overflow: hidden;  animation: anim-section-semi 0.7s ease-in forwards; } .pw-section-showing {  animation: anim-section-show 0.7s ease-in forwards; } .vnotify-container {  position: fixed; }  .vnotify-container.vn-top-right {   right: 10px;   top: 10px; }  .vnotify-container.vn-top-left {   top: 10px;   left: 10px; }  .vnotify-container.vn-bottom-right {   bottom: 10px;   right: 10px; }  .vnotify-container.vn-bottom-left {   bottom: 10px;   left: 10px; }  .vnotify-container.vn-center {   top: 50%;   left: 50%;   transform: translate(-50%, -50%); }  .vnotify-container .vn-close {   position: absolute;   top: 5px;   right: 10px;   width: 15px;   height: 15px;   padding: 2px;   cursor: pointer; }   .vnotify-container .vn-close:before, .vnotify-container .vn-close:after {    content: "";    position: absolute;    width: 100%;    top: 50%;    height: 2px;    background: #fff; }   .vnotify-container .vn-close:before {    -webkit-transform: rotate(45deg);    -moz-transform: rotate(45deg);    transform: rotate(45deg); }   .vnotify-container .vn-close:after {    -webkit-transform: rotate(-45deg);    -moz-transform: rotate(-45deg);    transform: rotate(-45deg); } .vnotify-item {  width: 20em;  padding: 15px;  position: relative;  -webkit-border-radius: 5px;  -moz-border-radius: 5px;  -ms-border-radius: 5px;  border-radius: 5px;  margin-bottom: 15px;  opacity: 0.75;  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=75)";  filter: alpha(opacity=75); }  .vnotify-item:hover {   opacity: 1; } .vnotify-title {  font-weight: bold; } .vnotify-info {  background: #3498db;  color: #fff; } .vnotify-success {  background: #2ecc71;  color: #fff; } .vnotify-error {  background: #e74c3c;  color: #fff; } .vnotify-warning {  background: #f39c12;  color: #fff; } .vnotify-notify {  background: #333;  color: #fff; } '; var s = document.createElement('style'); s.type = 'text/css'; s.innerHTML = l; s.id="sd_css_all"; document.getElementsByTagName('head')[0].appendChild(s);}();
    !function(){var t=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;window.requestAnimationFrame=t;var i=function(t,i){return Math.random()*(i-t)+t};window.Confetti=function(t){this.container=t,this.container.style.position="relative",this.canvas=document.createElement("canvas"),this.canvas.classList.add("confetti-canvas"),this.container.appendChild(this.canvas),this.ctx=this.canvas.getContext("2d");var i=this.container.getBoundingClientRect();this.canvas.width=i.width,this.canvas.height=i.height,this.cx=this.ctx.canvas.width/2,this.cy=this.ctx.canvas.height/2,this.confetti=[],this.confettiCount=200,this.gravity=.9,this.terminalVelocity=8,this.drag=.075,this.colors=[{front:"red",back:"darkred"},{front:"green",back:"darkgreen"},{front:"blue",back:"darkblue"},{front:"yellow",back:"darkyellow"},{front:"orange",back:"darkorange"},{front:"pink",back:"darkpink"},{front:"purple",back:"darkpurple"},{front:"turquoise",back:"darkturquoise"}],this.initialized=!1;var n=this;window.addEventListener("resize",function(){n.resizeCanvas()})},Confetti.prototype={resizeCanvas:function(){var t=this.container.getBoundingClientRect();this.canvas.width=t.width,this.canvas.height=t.height,this.cx=this.ctx.canvas.width/2,this.cy=this.ctx.canvas.height/2},initConfetti:function(){if(!this.initialized){this.initialized=!0,this.confetti=[];for(var t=0;t<this.confettiCount;t++)this.confetti.push({color:this.colors[Math.floor(i(0,this.colors.length))],dimensions:{x:i(10,20),y:i(10,30)},position:{x:i(0,this.canvas.width),y:this.canvas.height-1},rotation:i(0,2*Math.PI),scale:{x:1,y:1},velocity:{x:i(-25,25),y:i(0,-50)}})}},render:function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);for(var t=0,i=this.confetti.length;i>t;t++){var n=this.confetti[t];if(null!=n){var s=n.dimensions.x*n.scale.x,a=n.dimensions.y*n.scale.y;this.ctx.translate(n.position.x,n.position.y),this.ctx.rotate(n.rotation),n.velocity.x-=n.velocity.x*this.drag,n.velocity.y=Math.min(n.velocity.y+this.gravity,this.terminalVelocity),n.velocity.x+=Math.random()>.5?Math.random():-Math.random(),n.position.x+=n.velocity.x,n.position.y+=n.velocity.y,n.position.y>=this.canvas.height&&this.confetti.splice(t,1),n.position.x>this.canvas.width&&(n.position.x=0),n.position.x<0&&(n.position.x=this.canvas.width),n.scale.y=Math.cos(.1*n.position.y),this.ctx.fillStyle=n.scale.y>0?n.color.front:n.color.back,this.ctx.fillRect(-s/2,-a/2,s,a),this.ctx.setTransform(1,0,0,1,0,0)}}},play:function(){this.initConfetti(),this.canvas.style.display="";var t=this,i=new Audio("https://piworld.es/iedib/assets/sounds/magical-hit.mp3");i.addEventListener("canplaythrough",function(t){i.play()});var n=function(){t.render(),t.confetti.length?window.requestAnimationFrame(n):this.canvas.style.display="none"};window.requestAnimationFrame(n)},dispose:function(){this.initialized=!1}}}();
window.IAPace=window.IAPace||{},function(e){var t=4,i=function(e){for(var t={},i=e.substring(1).split("&"),r=0;r<i.length;r++){var n=i[r].split("=");n[0]&&(t[n[0]]=n[1]||!0)}return t},r=function(e,t){this.coursename=e,this.defaultLevel=4>=t?t:4,this._tree={},this.load()};r.prototype={load:function(){var e=localStorage.getItem("iapace");try{this._tree=JSON.parse(e)}catch(t){console.error(t)}var i=!1;this._tree||(this._tree={},i=!0),this._tree[this.coursename]||(this._tree[this.coursename]={dl:this.defaultLevel,ch:{},ia:{}},i=!0),i&&this.save()},save:function(){this._tree&&localStorage.setItem("iapace",JSON.stringify(this._tree))},drop:function(e){for(var t=Object.keys(this._tree[this.coursename].ch),i=0,r=t.length;r>i;i++)t[i].startsWith(e)&&delete this._tree[this.coursename].ch[t[i]]},find:function(e){return this._tree[this.coursename].ch[e]},create:function(e){var t=e.split("."),i=t[0];this.find(i)||(this._tree[this.coursename].ch[i]={n:0,s:0,s2:0,h:[]});for(var r=1,n=t.length;n>r;r++)i=i+"."+t[r],this.find(i)||(this._tree[this.coursename].ch[i]={n:0,s:0,s2:0,h:[]});return this._tree[this.coursename].ch[e]},saveInitialEval:function(e,t){this._tree[this.coursename].ia[e]=t,this.save()},loadInitialEval:function(e){return this._tree[this.coursename].ia[e]},findCreate:function(e){var t=this.find(e);return t||(t=this.create(e)),t},addScore:function(e,i){var r=this.findCreate(e);for(r.n+=1,r.s+=i,r.s2+=i*i,r.h.push(i);r.h.length>t;)r.h.shift()},level:function(e){var i=this.findCreate(e),r=i.n;if(r>0){var n=i.s/(1*r),s=Math.sqrt(Math.abs(i.s2/r-n*n));if(0==n)return 1;var a=s/n;if(i.h.length>=t){for(var h=0,o=0,c=i.h.length,u=0;c>u;u++){var f=i.h[u];h+=f,o+=f*f}if(h/=1*c,o=Math.sqrt(o/(1*c)-h*h),h>0&&(cv2=o/h,cv2<.75)){var l=.1*n+.9*h;n=l>n?l:n}}var v=Math.round(.4*n);return v>1&&a>.75&&(v-=1),v>0?v:1}return i.dl},inference:function(e){var t=this.find(e),i=e.split("."),r=i.slice(0,i.length-1).join(".");if(t){var n=this.level(e);return n?n:r?this.inference(r):this._tree[this.coursename].dl}return r?this.inference(r):this._tree[this.coursename].dl},toString:function(){return JSON.stringify(this._tree,null,2)}},e.load=function(e,t){return new r(e,t)},window.IB=window.IB||{};var n,s="",a=document.querySelector(".homelink > a");if(a){courseName=a.innerText;var h="?"+(a.href.split("?")[1]||"");n=i(h).id}s=s||n||"cmat0",window.IB.iapace=new r(s,2)}(window.IAPace);
Array.indexOf||(Array.prototype.indexOf=function(t,s){for(var i=s||0;i<this.length;i++)if(this[i]===t)return i;return-1});var Parser=function(t){function s(t){function s(){}return s.prototype=t,new s}function i(t,s,i,e){this.type_=t,this.index_=s||0,this.prio_=i||0,this.number_=void 0!==e&&null!==e?e:0,this.toString=function(){switch(this.type_){case B:return this.number_;case R:case V:case W:return this.index_;case G:return"CALL";default:return"Invalid Token"}}}function e(t,s,i,e){this.tokens=t,this.ops1=s,this.ops2=i,this.functions=e}function n(t){return"string"==typeof t?(J.lastIndex=0,J.test(t)?"'"+t.replace(J,function(t){var s=T[t];return"string"==typeof s?s:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+"'":"'"+t+"'"):t}function r(t,s){return Number(t)+Number(s)}function o(t,s){return t-s}function h(t,s){return t*s}function a(t,s){return t/s}function p(t,s){return t%s}function u(t,s){return""+t+s}function f(t,s){return t==s}function c(t,s){return t!=s}function l(t,s){return t>s}function d(t,s){return s>t}function g(t,s){return t>=s}function k(t,s){return s>=t}function v(t,s){return Boolean(t&&s)}function M(t,s){return Boolean(t||s)}function m(t){return Math.sinh?Math.sinh(t):(Math.exp(t)-Math.exp(-t))/2}function _(t){return Math.cosh?Math.cosh(t):(Math.exp(t)+Math.exp(-t))/2}function b(t){return Math.tanh?Math.tanh(t):t===1/0?1:t===-(1/0)?-1:(Math.exp(t)-Math.exp(-t))/(Math.exp(t)+Math.exp(-t))}function w(t){return Math.asinh?Math.asinh(t):t===-(1/0)?t:Math.log(t+Math.sqrt(t*t+1))}function y(t){return Math.acosh?Math.acosh(t):Math.log(t+Math.sqrt(t*t-1))}function C(t){return Math.atanh?Math.atanh(t):Math.log((1+t)/(1-t))/2}function A(t){return Math.log(t)*Math.LOG10E}function S(t){return-t}function E(t){return Math.trunc?Math.trunc(t):x<0?Math.ceil(x):Math.floor(x)}function O(t){return Math.random()*(t||1)}function P(t){t=Math.floor(t);for(var s=t;t>1;)s*=--t;return s}function N(){if(Math.hypot)return Math.hypot.apply(this,arguments);for(var t=0,s=arguments.length,i=0;s>i;i++){if(arguments[i]===1/0||arguments[i]===-(1/0))return 1/0;t+=arguments[i]*arguments[i]}return Math.sqrt(t)}function q(t,s,i){return t?s:i}function I(t){return"undefined"==typeof t&&(t=""),t.toString().length}function L(t,s,i){return"undefined"==typeof i||0===+i?Math[t](s):(s=+s,i=-+i,isNaN(s)||"number"!=typeof i||i%1!==0?NaN:(s=s.toString().split("e"),s=Math[t](+(s[0]+"e"+(s[1]?+s[1]-i:-i))),s=s.toString().split("e"),+(s[0]+"e"+(s[1]?+s[1]+i:i))))}function j(t,s){return t instanceof Array&&(s=t[1],t=t[0]),L("round",t,s)}function F(t,s){return"[object Array]"!=Object.prototype.toString.call(t)?[t,s]:(t=t.slice(),t.push(s),t)}function U(){this.success=!1,this.errormsg="",this.expression="",this.pos=0,this.tokennumber=0,this.tokenprio=0,this.tokenindex=0,this.tmpprio=0,this.ops1={sin:Math.sin,cos:Math.cos,tan:Math.tan,asin:Math.asin,acos:Math.acos,atan:Math.atan,sinh:m,cosh:_,tanh:b,asinh:w,acosh:y,atanh:C,sqrt:Math.sqrt,log:Math.log,lg:A,log10:A,abs:Math.abs,ceil:Math.ceil,floor:Math.floor,round:j,trunc:E,"-":S,exp:Math.exp},this.ops2={"+":r,"-":o,"*":h,"/":a,"%":p,"^":Math.pow,",":F,"||":u,"==":f,"!=":c,">":l,"<":d,">=":g,"<=":k,and:v,or:M},this.functions={random:O,fac:P,min:Math.min,max:Math.max,hypot:N,pyt:N,pow:Math.pow,atan2:Math.atan2,"if":q,len:I},this.consts={E:Math.E,PI:Math.PI}}var B=0,R=1,V=2,W=3,G=4,J=/[\\\'\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,T={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","'":"\\'","\\":"\\\\"};e.prototype={simplify:function(t){t=t||{};var n,r,o,h,a=[],p=[],u=this.tokens.length,f=0;for(f=0;u>f;f++){h=this.tokens[f];var c=h.type_;if(c===B)a.push(h);else if(c===W&&h.index_ in t)h=new i(B,0,0,t[h.index_]),a.push(h);else if(c===V&&a.length>1)r=a.pop(),n=a.pop(),o=this.ops2[h.index_],h=new i(B,0,0,o(n.number_,r.number_)),a.push(h);else if(c===R&&a.length>0)n=a.pop(),o=this.ops1[h.index_],h=new i(B,0,0,o(n.number_)),a.push(h);else{for(;a.length>0;)p.push(a.shift());p.push(h)}}for(;a.length>0;)p.push(a.shift());return new e(p,s(this.ops1),s(this.ops2),s(this.functions))},substitute:function(t,n){n instanceof e||(n=(new U).parse(String(n)));var r,o=[],h=this.tokens.length,a=0;for(a=0;h>a;a++){r=this.tokens[a];var p=r.type_;if(p===W&&r.index_===t)for(var u=0;u<n.tokens.length;u++){var f=n.tokens[u],c=new i(f.type_,f.index_,f.prio_,f.number_);o.push(c)}else o.push(r)}var l=new e(o,s(this.ops1),s(this.ops2),s(this.functions));return l},evaluate:function(t){t=t||{};var s,i,e,n,r=[],o=this.tokens.length,h=0;for(h=0;o>h;h++){n=this.tokens[h];var a=n.type_;if(a===B)r.push(n.number_);else if(a===V)i=r.pop(),s=r.pop(),e=this.ops2[n.index_],r.push(e(s,i));else if(a===W)if(n.index_ in t)r.push(t[n.index_]);else{if(!(n.index_ in this.functions))throw new Error("undefined variable: "+n.index_);r.push(this.functions[n.index_])}else if(a===R)s=r.pop(),e=this.ops1[n.index_],r.push(e(s));else{if(a!==G)throw new Error("invalid Expression");if(s=r.pop(),e=r.pop(),!e.apply||!e.call)throw new Error(e+" is not a function");"[object Array]"==Object.prototype.toString.call(s)?r.push(e.apply(void 0,s)):r.push(e.call(void 0,s))}}if(r.length>1)throw new Error("invalid Expression (parity)");return r[0]},toString:function(t){var s,i,e,r,o=[],h=this.tokens.length,a=0;for(a=0;h>a;a++){r=this.tokens[a];var p=r.type_;if(p===B)o.push(n(r.number_));else if(p===V)i=o.pop(),s=o.pop(),e=r.index_,t&&"^"==e?o.push("Math.pow("+s+","+i+")"):o.push("("+s+e+i+")");else if(p===W)o.push(r.index_);else if(p===R)s=o.pop(),e=r.index_,"-"===e?o.push("("+e+s+")"):o.push(e+"("+s+")");else{if(p!==G)throw new Error("invalid Expression");s=o.pop(),e=o.pop(),o.push(e+"("+s+")")}}if(o.length>1)throw new Error("invalid Expression (parity)");return o[0]},variables:function(){for(var t=this.tokens.length,s=[],i=0;t>i;i++){var e=this.tokens[i];e.type_===W&&-1==s.indexOf(e.index_)&&s.push(e.index_)}return s},toJSFunction:function(t,s){var i=new Function(t,"with(Parser.values) { return "+this.simplify(s).toString(!0)+"; }");return i}},U.parse=function(t){return(new U).parse(t)},U.evaluate=function(t,s){return U.parse(t).evaluate(s)},U.Expression=e,U.values={sin:Math.sin,cos:Math.cos,tan:Math.tan,asin:Math.asin,acos:Math.acos,atan:Math.atan,sinh:m,cosh:_,tanh:b,asinh:w,acosh:y,atanh:C,sqrt:Math.sqrt,log:Math.log,lg:A,log10:A,abs:Math.abs,ceil:Math.ceil,floor:Math.floor,round:j,trunc:E,random:O,fac:P,exp:Math.exp,min:Math.min,max:Math.max,hypot:N,pyt:N,pow:Math.pow,atan2:Math.atan2,"if":q,len:I,E:Math.E,PI:Math.PI};var z=1,D=2,H=4,K=8,Q=16,X=32,Y=64,Z=128,$=256;return U.prototype={parse:function(t){this.errormsg="",this.success=!0;var n=[],r=[];this.tmpprio=0;var o=z|K|H|Y,h=0;for(this.expression=t,this.pos=0;this.pos<this.expression.length;)if(this.isOperator())this.isSign()&&o&Y?(this.isNegativeSign()&&(this.tokenprio=2,this.tokenindex="-",h++,this.addfunc(r,n,R)),o=z|K|H|Y):this.isComment()||(0===(o&D)&&this.error_parsing(this.pos,"unexpected operator"),h+=2,this.addfunc(r,n,V),o=z|K|H|Y);else if(this.isNumber()){0===(o&z)&&this.error_parsing(this.pos,"unexpected number");var a=new i(B,0,0,this.tokennumber);r.push(a),o=D|Q|X}else if(this.isString()){0===(o&z)&&this.error_parsing(this.pos,"unexpected string");var a=new i(B,0,0,this.tokennumber);r.push(a),o=D|Q|X}else if(this.isLeftParenth())0===(o&K)&&this.error_parsing(this.pos,'unexpected "("'),o&Z&&(h+=2,this.tokenprio=-2,this.tokenindex=-1,this.addfunc(r,n,G)),o=z|K|H|Y|$;else if(this.isRightParenth()){if(o&$){var a=new i(B,0,0,[]);r.push(a)}else 0===(o&Q)&&this.error_parsing(this.pos,'unexpected ")"');o=D|Q|X|K|Z}else if(this.isComma())0===(o&X)&&this.error_parsing(this.pos,'unexpected ","'),this.addfunc(r,n,V),h+=2,o=z|K|H|Y;else if(this.isConst()){0===(o&z)&&this.error_parsing(this.pos,"unexpected constant");var p=new i(B,0,0,this.tokennumber);r.push(p),o=D|Q|X}else if(this.isOp2())0===(o&H)&&this.error_parsing(this.pos,"unexpected function"),this.addfunc(r,n,V),h+=2,o=K;else if(this.isOp1())0===(o&H)&&this.error_parsing(this.pos,"unexpected function"),this.addfunc(r,n,R),h++,o=K;else if(this.isVar()){0===(o&z)&&this.error_parsing(this.pos,"unexpected variable");var u=new i(W,this.tokenindex,0,0);r.push(u),o=D|Q|X|K|Z}else this.isWhite()||(""===this.errormsg?this.error_parsing(this.pos,"unknown character"):this.error_parsing(this.pos,this.errormsg));for((this.tmpprio<0||this.tmpprio>=10)&&this.error_parsing(this.pos,'unmatched "()"');n.length>0;){var f=n.pop();r.push(f)}return h+1!==r.length&&this.error_parsing(this.pos,"parity"),new e(r,s(this.ops1),s(this.ops2),s(this.functions))},evaluate:function(t,s){return this.parse(t).evaluate(s)},error_parsing:function(t,s){throw this.success=!1,this.errormsg="parse error [column "+t+"]: "+s,this.column=t,new Error(this.errormsg)},addfunc:function(t,s,e){for(var n=new i(e,this.tokenindex,this.tokenprio+this.tmpprio,0);s.length>0&&n.prio_<=s[s.length-1].prio_;)t.push(s.pop());s.push(n)},isNumber:function(){for(var t=!1,s="";this.pos<this.expression.length;){var i=this.expression.charCodeAt(this.pos);if(!(i>=48&&57>=i||46===i))break;s+=this.expression.charAt(this.pos),this.pos++,this.tokennumber=parseFloat(s),t=!0}return t},unescape:function(t,s){for(var i=[],e=!1,n=0;n<t.length;n++){var r=t.charAt(n);if(e){switch(r){case"'":i.push("'");break;case"\\":i.push("\\");break;case"/":i.push("/");break;case"b":i.push("\b");break;case"f":i.push("\f");break;case"n":i.push("\n");break;case"r":i.push("\r");break;case"t":i.push("	");break;case"u":var o=parseInt(t.substring(n+1,n+5),16);i.push(String.fromCharCode(o)),n+=4;break;default:throw this.error_parsing(s+n,"Illegal escape sequence: '\\"+r+"'")}e=!1}else"\\"==r?e=!0:i.push(r)}return i.join("")},isString:function(){var t=!1,s="",i=this.pos;if(this.pos<this.expression.length&&"'"==this.expression.charAt(this.pos))for(this.pos++;this.pos<this.expression.length;){var e=this.expression.charAt(this.pos);if("'"==e&&"\\"!=s.slice(-1)){this.pos++,this.tokennumber=this.unescape(s,i),t=!0;break}s+=this.expression.charAt(this.pos),this.pos++}return t},isConst:function(){var t;for(var s in this.consts){var i=s.length;if(t=this.expression.substr(this.pos,i),s===t)return this.tokennumber=this.consts[s],this.pos+=i,!0}return!1},isOperator:function(){var t=this.expression.charCodeAt(this.pos);if(43===t)this.tokenprio=2,this.tokenindex="+";else if(45===t)this.tokenprio=2,this.tokenindex="-";else if(62===t)61===this.expression.charCodeAt(this.pos+1)?(this.pos++,this.tokenprio=1,this.tokenindex=">="):(this.tokenprio=1,this.tokenindex=">");else if(60===t)61===this.expression.charCodeAt(this.pos+1)?(this.pos++,this.tokenprio=1,this.tokenindex="<="):(this.tokenprio=1,this.tokenindex="<");else if(124===t){if(124!==this.expression.charCodeAt(this.pos+1))return!1;this.pos++,this.tokenprio=1,this.tokenindex="||"}else if(61===t){if(61!==this.expression.charCodeAt(this.pos+1))return!1;this.pos++,this.tokenprio=1,this.tokenindex="=="}else if(33===t){if(61!==this.expression.charCodeAt(this.pos+1))return!1;this.pos++,this.tokenprio=1,this.tokenindex="!="}else if(97===t){if(110!==this.expression.charCodeAt(this.pos+1)||100!==this.expression.charCodeAt(this.pos+2))return!1;this.pos++,this.pos++,this.tokenprio=0,this.tokenindex="and"}else if(111===t){if(114!==this.expression.charCodeAt(this.pos+1))return!1;this.pos++,this.tokenprio=0,this.tokenindex="or"}else if(42===t||8729===t||8226===t)this.tokenprio=3,this.tokenindex="*";else if(47===t)this.tokenprio=4,this.tokenindex="/";else if(37===t)this.tokenprio=4,this.tokenindex="%";else{if(94!==t)return!1;this.tokenprio=5,this.tokenindex="^"}return this.pos++,!0},isSign:function(){var t=this.expression.charCodeAt(this.pos-1);return 45===t||43===t?!0:!1},isPositiveSign:function(){var t=this.expression.charCodeAt(this.pos-1);return 43===t?!0:!1},isNegativeSign:function(){var t=this.expression.charCodeAt(this.pos-1);return 45===t?!0:!1},isLeftParenth:function(){var t=this.expression.charCodeAt(this.pos);return 40===t?(this.pos++,this.tmpprio+=10,!0):!1},isRightParenth:function(){var t=this.expression.charCodeAt(this.pos);return 41===t?(this.pos++,this.tmpprio-=10,!0):!1},isComma:function(){var t=this.expression.charCodeAt(this.pos);return 44===t?(this.pos++,this.tokenprio=-1,this.tokenindex=",",!0):!1},isWhite:function(){var t=this.expression.charCodeAt(this.pos);return 32===t||9===t||10===t||13===t?(this.pos++,!0):!1},isOp1:function(){for(var t="",s=this.pos;s<this.expression.length;s++){var i=this.expression.charAt(s);if(i.toUpperCase()===i.toLowerCase()&&(s===this.pos||"_"!=i&&("0">i||i>"9")))break;t+=i}return t.length>0&&t in this.ops1?(this.tokenindex=t,this.tokenprio=5,this.pos+=t.length,!0):!1},isOp2:function(){for(var t="",s=this.pos;s<this.expression.length;s++){var i=this.expression.charAt(s);if(i.toUpperCase()===i.toLowerCase()&&(s===this.pos||"_"!=i&&("0">i||i>"9")))break;t+=i}return t.length>0&&t in this.ops2?(this.tokenindex=t,this.tokenprio=5,this.pos+=t.length,!0):!1},isVar:function(){for(var t="",s=this.pos;s<this.expression.length;s++){var i=this.expression.charAt(s);if(i.toUpperCase()===i.toLowerCase()&&(s===this.pos||"_"!=i&&("0">i||i>"9")))break;t+=i}return t.length>0?(this.tokenindex=t,this.tokenprio=4,this.pos+=t.length,!0):!1},isComment:function(){var t=this.expression.charCodeAt(this.pos-1);return 47===t&&42===this.expression.charCodeAt(this.pos)?(this.pos=this.expression.indexOf("*/",this.pos)+2,1===this.pos&&(this.pos=this.expression.length),!0):!1}},t.Parser=U,U}("undefined"==typeof exports?{}:exports);
function Overlay(t){t.style.position="relative",t.style.opacity="0.9",this.backdrop=document.createElement("div"),this.backdrop.style.display="none",this.backdrop.style.position="absolute",this.backdrop.style.width="100%",this.backdrop.style.height="100%",this.backdrop.style.top="0",this.backdrop.style.left="0",this.backdrop.style.background="rgba(0,0,0,0.6)",this.backdrop.style["pointer-events"]="none",t.append(this.backdrop),this.overlay=document.createElement("div"),this.overlay.style.display="none",this.overlay.style.position="absolute",this.overlay.style.width="50%",this.overlay.style.height="50%",this.overlay.style.top="25%",this.overlay.style.left="25%",this.overlay.style["border-radius"]="10px",this.overlay.style.padding="10px",this.overlay.style.background="rgba(200,200,100)",this.overlay.style["box-shadow"]="5px 5px rgb(20,20,20)",t.append(this.overlay)}Overlay.prototype={back:function(t){t?this.backdrop.style.display="":this.backdrop.style.display="none"},msg:function(t){return t?(this.overlay.style.display="",void(this.overlay.innerHTML=t)):void(this.overlay.style.display="none")}};
!function(){var t="sections";if(window.IB.sd[t])return console.error("Warning: "+t+" loaded twice."),void(window.IB.sd[t].bind&&window.IB.sd[t].bind());var i=function(t,i,s){var e=t.classList;e.contains(i)?(e.add(s),e.remove(i)):(e.add(i),e.remove(s))},s=function(t){this.aEl=t,this.parentLI=t.parentElement,this.aEl.classList.add("pw-section-active"),this.aEl.classList.add("pw-section-minus"),this.targetQuery=t.getAttribute("data-target"),this.target=this.parentLI.querySelector(this.targetQuery),this.closed=!1;var i=this;this.handler=function(t){i.toggle()},this.active=!0,this.aEl.addEventListener("click",this.handler)};s.prototype={toggle:function(){i(this.aEl,"pw-section-plus","pw-section-minus"),i(this.target,"pw-section-semi","pw-section-showing"),this.active=!this.active},expand:function(){this.active||this.toggle()},collapse:function(){this.active&&this.toggle()},severity:function(t){"important"==t?this.aEl.classList.add("pw-section-important"):this.aEl.classList.remove("pw-section-important")},dispose:function(){this.aEl.removeEventListener("click",this.handler),this.aEl.classList.remove("pw-section-active"),this.aEl.classList.remove("pw-section-minus"),this.aEl.classList.remove("pw-section-plus"),this.target.classList.remove("pw-section-semi"),this.target.classList.remove("pw-section-showing")}};var e=function(t){this._container=t,this._sectionElems=t.querySelectorAll("li > h3[data-target]"),this.sections={};for(var i=0,e=this._sectionElems.length;e>i;i++){var n=this._sectionElems[i],o=n.getAttribute("data-target");o&&(this.sections[o]=new s(n))}};e.prototype={autoCollapse:function(){var t=this._container.dataset,i=t.idQuizz;if(!i)return void console.error("Missing idQuizz in sections container");var s=IB.iapace._tree[IB.iapace.coursename||"cmat0"].ia;if(!s)return void console.error("Cannot find initial test "+i);var e=s[i];if(!e)return void console.error("Cannot find initial test "+i);if(t.collapse)for(var n=t.collapse.split(";"),o=0,a=n.length;a>o;o++){for(var r=n[o],c=r.split(":"),l=c[0].trim(),h=c[1].trim(),d=!0,v=h.split("+"),p=0,u=v.length;u>p;p++){var f=v[p].trim();if(e.preguntes[f]<5){d=!1;break}}d&&(console.log("Must collapse ",l),this.collapse("#"+l))}},expand:function(t){if(t)this.sections[t]&&this.sections[t].expand();else for(var i=Object.keys(this.sections),s=0,e=i.length;e>s;s++){var n=i[s];this.sections[n].expand()}},collapse:function(t){if(t)this.sections[t]&&this.sections[t].collapse();else for(var i=Object.keys(this.sections),s=0,e=i.length;e>s;s++){var n=i[s];this.sections[n].collapse()}},severity:function(t,i){t&&this.sections[t]&&this.sections[t].severity(i)},dispose:function(){for(var t=Object.keys(this.sections),i=0,s=t.length;s>i;i++){var e=t[i];this.sections[e].dispose()}}};var n={inst:{}};window.IB.sd[t]=n;var o=function(){for(var t=document.querySelectorAll('ul[role="sections"]'),i=0,s=t.length;s>i;i++){var o=t[i];if("1"!=o.dataset.active){o.dataset.active="1";var a=new e(o);a.id||(a.id="sd_"+Math.random().toString(32).substring(2)),n.inst[a.id]=a}}};n.bind=o,n.unbind=function(){for(var t=Object.values(n.inst),i=0,s=t.length;s>i;i++)t[i].dispose();n.inst={}},o()}();
window.IB=window.IB||{},window.IB.sd=window.IB.sd||{},function(){function handleInteraction(elem,data,ds,revisited){if(console.log("handle interaction"),console.log(data,ds),ds.growl)for(var growls=ds.growl.split(";"),ir=0,lr=growls.length;lr>ir;ir++){var rule=growls[ir],ruleParts=rule.split(":"),text=ruleParts[0].trim(),condition=ruleParts[1].trim();condition=condition.replace("\\gt",">").replace("\\ge",">=").replace("\\lt","<").replace("\\le","<=");var fullfilled=eval(""+data.score+condition);if(fullfilled){if(revisited||console.log("Must say aloud if not revisited ",text),hasOverlay){elem.querySelector("iframe").style["pointer-events"]="none";var overlay=new Overlay(elem);overlay.back(!0),overlay.msg(text)}break}}if(hasSections)for(var sectionInstances=Object.values(IB.sd.sections.inst||{}),ks=0,lks=sectionInstances.length;lks>ks;ks++)sectionInstances[ks].autoCollapse&&sectionInstances[ks].autoCollapse();if(ds.scroll)for(var scrolls=ds.scroll.split(";"),ir=0,lr=scrolls.length;lr>ir;ir++){var scroll=scrolls[ir],ruleParts=scroll.split(":"),sec=ruleParts[0].trim(),condition=ruleParts[1].trim();condition=condition.replace("\\gt",">").replace("\\ge",">=").replace("\\lt","<").replace("\\le","<=");var fullfilled=eval(""+data.score+condition);if(fullfilled=condition.replace("\\gt",">").replace("\\ge",">=").replace("\\lt","<").replace("\\le","<=")){if(!revisited){console.log("Must scroll to ",sec);var aTag=$("a[name='"+sec+"']");$("html,body").animate({scrollTop:aTag.offset().top-200},"fast")}console.log("I would not go to ",sec);break}}}function initApi(elem){var flatten=function(e){if(!e)return"";if("object"!=typeof e)return e;for(var t=Object.keys(e),o="",r=0,a=t.length;a>r;r++)o+=e[t[r]]+" ";return o},h5p_filter=document.querySelector('[role="smartquizz"]'),h5p_filter_iframe=h5p_filter.querySelector("iframe");if(h5p_filter_iframe){var embed_doc=h5p_filter_iframe.contentWindow;console.log(embed_doc);var h5p_iframe=embed_doc.document.querySelector("iframe.h5p-iframe");if(console.log(h5p_iframe),!h5p_iframe)return!1;h5p_iframe=h5p_iframe.contentWindow,console.log(h5p_iframe);var H5P=h5p_iframe.H5P;if(console.log(H5P),!H5P)return console.log("NO H5P trying latter"),!1;var preguntes={};return H5P.externalDispatcher.on("xAPI",function(evt){console.log(evt);var data=evt.data,st=data.statement,verb=st.verb.id,r=st.result,isCompleted="http://adlnet.gov/expapi/verbs/completed"==verb,isInteracted="http://adlnet.gov/expapi/verbs/interacted"==verb,pregunta=flatten(st.object.definition.name).trim(),ascore=10*evt.getScore()/evt.getMaxScore();if(hasIAPace&&elem.dataset.category&&null!=ascore&&!isNaN(ascore)&&(preguntes[pregunta]=ascore,console.log("Adding score to "+elem.dataset.category,ascore),IB.iapace.addScore(elem.dataset.category,ascore)),isCompleted){var overallScore=10*r.score.scaled,persistData={completion:r.completion,success:r.success,score:overallScore,preguntes:preguntes};if(hasIAPace&&IB.iapace.saveInitialEval(elem.id,persistData),elem.dataset.confetti&&hasConfetti){var condition=elem.dataset.confetti;condition=condition.replace("\\gt",">").replace("\\ge",">=").replace("\\lt","<").replace("\\le","<=");var fullfilled=eval(""+overallScore+condition);if(fullfilled){var confetti=new Confetti(elem);confetti.play(),window.setTimeout(function(){handleInteraction(elem,persistData,h5p_filter.dataset,!1)},1500)}else handleInteraction(elem,persistData,h5p_filter.dataset,!1)}else handleInteraction(elem,persistData,h5p_filter.dataset,!1)}}),!0}}var hasSections=null!=window.IB.sd.sections,hasIAPace=null!=window.IB&&null!=window.IB.iapace,hasOverlay=null!=window.Overlay,hasConfetti=null!=window.Confetti;hasSections||console.error("Sections module required"),hasIAPace||console.error("IAPace module required"),hasOverlay||console.error("Overlay module required"),hasConfetti||console.error("Confetti module required");var COMPONENT_NAME="dynamic_smartquizz";if(window.IB.sd[COMPONENT_NAME])return console.error("Warning: "+COMPONENT_NAME+" loaded twice."),void(window.IB.sd[COMPONENT_NAME].bind&&window.IB.sd[COMPONENT_NAME].bind());var FunctionAttemptExec=function(e,t,o,r){var a=e(r);!a&&t>0&&window.setTimeout(function(){FunctionAttemptExec(e,t-1,o,r)},o)},alias={author:"Josep Mulet",version:"1.0",inst:{}};window.IB.sd[COMPONENT_NAME]=alias;var bind=function(){for(var e=document.querySelectorAll('[role="smartquizz"]'),t=0,o=e.length;o>t;t++)if(!e[t].dataset.active){e[t].dataset.active="1";var r=e[t].id;if(console.log(r,hasIAPace),r&&hasIAPace){var a=IB.iapace.loadInitialEval(r);a?(console.log(a),handleInteraction(e[t],a,e[t].dataset,!0)):(console.log("No initial data"),FunctionAttemptExec(initApi,5,1e3,e[t]))}}};alias.bind=bind,alias.unbind=function(){console.error("Not implemented")},bind()}();
var vNotify=function(){var t={topLeft:"topLeft",topRight:"topRight",bottomLeft:"bottomLeft",bottomRight:"bottomRight",center:"center"},n={fadeInDuration:1e3,fadeOutDuration:1e3,fadeInterval:50,visibleDuration:5e3,postHoverVisibleDuration:500,position:t.topRight,sticky:!1,showClose:!0},e=function(t){return t.notifyClass="vnotify-info",u(t)},o=function(t){return t.notifyClass="vnotify-success",u(t)},i=function(t){return t.notifyClass="vnotify-error",u(t)},r=function(t){return t.notifyClass="vnotify-warning",u(t)},a=function(t){return t.notifyClass="vnotify-notify",u(t)},s=function(t){return u(t)},u=function(t){if(!t.title&&!t.text)return null;var n=document.createDocumentFragment(),e=document.createElement("div");e.classList.add("vnotify-item"),e.classList.add(t.notifyClass),e.style.opacity=0,e.options=y(t),t.title&&e.appendChild(c(t.title)),t.text&&e.appendChild(l(t.text)),e.options.showClose&&e.appendChild(f(e)),e.visibleDuration=e.options.visibleDuration;var o=function(){e.fadeInterval=D("out",e.options.fadeOutDuration,e)},i=function(){clearTimeout(e.interval),clearTimeout(e.fadeInterval),e.style.opacity=null,e.visibleDuration=e.options.postHoverVisibleDuration},r=function(){e.interval=setTimeout(o,e.visibleDuration)};n.appendChild(e);var a=d(e.options.position);return a.appendChild(n),e.addEventListener("mouseover",i),D("in",e.options.fadeInDuration,e),e.options.sticky||(e.addEventListener("mouseout",r),r()),e},l=function(t){var n=document.createElement("div");return n.classList.add("vnotify-text"),n.innerHTML=t,n},c=function(t){var n=document.createElement("div");return n.classList.add("vnotify-title"),n.innerHTML=t,n},f=function(t){var n=document.createElement("span");return n.classList.add("vn-close"),n.addEventListener("click",function(){m(t)}),n},d=function(t){var n=p(t),e=document.querySelector("."+n);return e?e:v(n)},v=function(t){var n=document.createDocumentFragment();return container=document.createElement("div"),container.classList.add("vnotify-container"),container.classList.add(t),container.setAttribute("role","alert"),n.appendChild(container),document.body.appendChild(n),container},p=function(n){switch(n){case t.topLeft:return"vn-top-left";case t.bottomRight:return"vn-bottom-right";case t.bottomLeft:return"vn-bottom-left";case t.center:return"vn-center";default:return"vn-top-right"}},y=function(t){return{fadeInDuration:t.fadeInDuration||n.fadeInDuration,fadeOutDuration:t.fadeOutDuration||n.fadeOutDuration,fadeInterval:t.fadeInterval||n.fadeInterval,visibleDuration:t.visibleDuration||n.visibleDuration,postHoverVisibleDuration:t.postHoverVisibleDuration||n.postHoverVisibleDuration,position:t.position||n.position,sticky:null!=t.sticky?t.sticky:n.sticky,showClose:null!=t.showClose?t.showClose:n.showClose}},m=function(t){t.style.display="none",t.outerHTML="",t=null},D=function(t,e,o){function i(){a=r?a+u:a-u,o.style.opacity=a,0>=a&&(m(o),b()),(!r&&s>=a||r&&a>=s)&&window.clearInterval(l)}var r="in"===t,a=r?0:o.style.opacity||1,s=r?.8:0,u=n.fadeInterval/e;r&&(o.style.display="block",o.style.opacity=a);var l=window.setInterval(i,n.fadeInterval);return l},b=function(){var t=document.querySelector(".vnotify-item");if(!t)for(var n=document.querySelectorAll(".vnotify-container"),e=0;e<n.length;e++)n[e].outerHTML="",n[e]=null};return{info:e,success:o,error:i,warning:r,notify:a,custom:s,options:n,positionOption:t}}();
