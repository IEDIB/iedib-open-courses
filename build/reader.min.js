window.IB = window.IB || {}; window.IB.sd = window.IB.sd || {}; !function(e){var n={u:1,un:1,uno:1,dos:2,tres:3,quatre:4,cuatro:4,cinc:5,cinco:5,sis:6,seis:6,siete:7,set:7,vuit:8,ocho:8,nou:9,nueve:9,diez:10,deu:10},t=window.speechSynthesis,o=null!=t&&null!=window.SpeechSynthesisUtterance,i=window.SpeechRecognition||window.webkitSpeechRecognition,s=window.SpeechRecognitionEvent||window.webkitSpeechRecognitionEvent,c=null!=i&&null!=s;IB.supported2=c;var r=function(e,n){e=(e||"").toLowerCase();for(var t=0,o=null,i=(n||[]).length;i>t&&null==o;)n[t].lang.toLowerCase()==e&&(o=n[t]),t++;return o},l=[],a=!0,u=function(){if(window.addEventListener("unload",function(e){window.speechSynthesis.cancel()}),l=window.speechSynthesis.getVoices(),IB.SHOW_MUTE_BTN){var e=document.querySelector(".no-overflow");if(e.style.position="relative",e){var n=document.createElement("span");n.style.position="absolute",n.style.right="10px",n.style.fontSize="125%",n.style.color="lightgray",n.style.top="0",n.style.cursor="pointer",n.title="Desconnecta la veu";var t=document.createElement("i");t.classList.add("fas","fa-volume"),n.append(t),e.append(n),n.addEventListener("click",function(e){e.preventDefault(),a?(window.speechSynthesis.cancel(),t.classList.remove("fa-volume"),t.classList.add("fa-volume-mute"),n.title="Desconnecta la veu"):(t.classList.add("fa-volume"),t.classList.remove("fa-volume-mute"),n.title="Activa la veu"),a=!a})}}},d=["ca-ES","es-ES"];e.reader=function(n,t){if(t=t||0,o&&a){if(!l.length)return void(3>t&&setTimeout(function(){e.reader(n,t+1)},800));for(var i=null,s=null,c=0,u=d.length;u>c&&(s=d[c],i=r(d[c],l),null==i);c++);i&&n[s]||console.error("No voice/text found"),window.speechSynthesis.cancel();var v=n[s],w=new SpeechSynthesisUtterance(v);w.voice=i,window.speechSynthesis.speak(w)}},e.speechRecognition=function(e,t,o){if(o=o||!1,!c)return console.error("Speech recognition not supported"),void(e&&e(null,0));var s=new i;s.lang=t,s.interimResults=!1,s.maxAlternatives=1,s.start(),s.onresult=function(t){var o=t.results[0][0].transcript;o&&n[o]&&(o=""+n[o.toLowerCase().trim()]);var i=t.results[0][0].confidence;e&&e(o,i)}},o?(t.getVoices()||[]).length?u():t.addEventListener("voiceschanged",function(){u()}):console.error("Sorry: SpeechSynthesis not supported in browser.")}(window.IB);